import"./style.css";import player from"./player.js";import InputHandler from"./input.js";import{stateLists}from"./playerStates.js";import{Enemy}from"./enemies.js";import{ShotThing}from"./shotThing.js";import{UI}from"./UI.js";window.addEventListener("load",(function(){const e=document.querySelector("#canvas1"),t=e.getContext("2d");e.width=1600,e.height=900;const i=new class{constructor(e,t){this.width=e,this.height=t,this.player=new player(this),this.input=new InputHandler(this),this.enemy=new Enemy(this),this.shotThing=new ShotThing(this),this.UI=new UI(this),this.player.state.initState(stateLists.RunningRight),this.enemies=[],this.collisionAnimations=[],this.timeToNextEnemy=1e3,this.enemyTimers=this.timeToNextEnemy,this.score=0,this.over=!1}update(e){this.player.update(e),this.player.shotThings.forEach((t=>{t?.update(e),t?.checkCollisionEnemies()})),this.enemyTimers+=e,this.enemy.createEnemy();for(let t=this.enemies.length-1;t>=0;t--)this.enemies[t].update(e),this.enemies[t].checkCollisionPlayer?.();this.enemies.forEach((t=>{t.shotThings?.forEach((t=>{t.update(e),t.checkCollisionPlayer()}))})),this.enemies=this.enemies.filter((e=>e.x<this.width)),this.collisionAnimations.forEach((t=>t.update(e)))}draw(e){this.player.draw(e),this.player.shotThings.forEach((t=>{t.draw(e)}));for(let t=this.enemies.length-1;t>=0;t--)this.enemies[t].draw(e);this.enemies.forEach((t=>{t.shotThings?.forEach((t=>{t.draw(e)}))})),this.collisionAnimations.forEach((t=>t.draw(e))),this.UI.draw(e)}}(e.width,e.height);let s=0;!function h(n){bgVideo.pause&&bgVideo.play();const o=n-s;s=n,t.clearRect(0,0,e.width,e.height),i.update(o),i.draw(t),i.over||requestAnimationFrame(h)}(0)}));